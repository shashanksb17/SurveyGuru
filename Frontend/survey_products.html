<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Guru: The World's Most Popular Online Survey Tool</title>
    <link rel="icon" href="https://iili.io/HMt6B24.jpg" type="image/gif" sizes="16x16">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        *{
    padding: 0;
    margin: 0;
    font-family: 'Open Sans', 'Helvetica Neue', sans-serif;
}

#container{
    /* border: 1px solid red; */
    width: 90vw;
    margin: auto;
    height: 75vh;
    display: flex;
    margin-top: 20px;
    margin-bottom: 50px;
}

#left-container{
    width: 22%;
    /* overflow-y: scroll; */
    padding-left: 30px;
    padding-top: 30px;
    border-right: 1px solid rgb(99, 98, 98);
}

#left-container>div:nth-child(2){
    border: 1px solid rgb(117, 117, 117);
    border-radius: 5px;
    height: 40px;
    width: 230px;
    margin-bottom: 10px;
}

#left-container>div:nth-child(2)>input{
    width: 215px;
    border: none;
    position: absolute;
    height: 29px;
    padding-top: 7px;
    padding-bottom: 5px;
    padding-left: 15px;
    font-size: 18px;
    background: transparent;
}

.material-symbols-outlined{
    padding-top: 10px;
    margin-left: 200px;
}

#left-container>p{
    font-size: 22px;
    font-weight: bold;
    margin-bottom: 10px;
    margin-top: 25px;
    color: rgb(41, 45, 49);
}

#left-container-labels>div{
    display: flex;
    align-items: center;
    padding: 8px;
    font-size: 19px;
    color: rgb(51, 62, 72);
}

#left-container-labels>div>input{
    cursor: pointer;
}

#left-container-labels>div>label{
    padding-left: 10px;
    user-select: none;
}

.checkbox{
    width: 20px;
    height: 20px;
}

#right-container{
    width: 75%;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: auto;
    gap: 30px 10px;
    padding: 30px;
    padding-left: 75px;
    overflow-y: scroll;
    height: 600px;
}

.child-box{
    height: 200px;
    border-radius: 5px;
    width: 90%;
    display: flex;
    align-items:center;
    justify-content:center;
    text-align: center;
}

.child-box>p{
    padding: 15px;
    color: white;
    font-weight: bold;
    font-size: 15px;
}

#show{
    color: rgb(49, 191, 111);
}

#left-container>p:nth-child(1){
    color: rgb(120, 122, 124);
    font-size: 18px;
}

</style>
</head>
<body>
    <div id="navbar" class="sticky">
        <div id="logo">
            <a href="index.html">
                <img src="https://iili.io/HGkMXoB.jpg">
            </a>
        </div>
        <div id="nav-container">
            <div class="panel-group ">
               
                <div class="panel">
                    <div class="panel-heading">
                        <h4 class="panel-title1">
                        <a data-toggle="collapse" href="#collapse1" id="nav-content" >Products</a>
                        </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse ">
                        <div class="panel-heading1"> 
                            <p id="panel-top">Surveys</p>
                            <hr style="margin-top: 0; margin-bottom: 0;">
                            <a href="survey_monkey.html"><span id="panelurl">Survey Monkey</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Create & send surveys with the
                                    world's leading online survey
                                    software</p>
                            </div>
                            <br>
                            <a href="survey_products.html"><span id="panelurl">Enterprise</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Create & send surveys with the
                                    world's leading online survey
                                    software</p>
                            </div>
                            <br>
                            <a href=""><span id="panelurl">Integrations & Plug-ins</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Create & send surveys with the
                                    world's leading online survey
                                    software</p>
                            </div>
                            
                        </div>
                        
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                        <a data-toggle="collapse" href="#collapse2" id="nav-content">Solutions</a>
                        </h4>
                    </div>
                    <div id="collapse2" class="panel-collapse collapse ">
                        <div class="panel-heading1"> 
                            <p id="panel-top">Solutions for teams</p>
                            <hr style="margin-top: 0; margin-bottom: 0;">
                            <a href="solutions.html"><span id="panelurl">Customers</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Win more business with Customer
                                    Powered Data</p>
                            </div>
                            <br>
                            <a href=""><span id="panelurl">Employees</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Build a stronger workforce with
                                    Employee Powered Data</p>
                            </div>
                            <br>
                            <a href=""><span id="panelurl">Markets</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Validate business strategy with
                                    Market Powered Data</p>
                            </div>
                            
                        </div>
                        
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                        <a data-toggle="collapse" href="#collapse3" id="nav-content">Resources</a>
                        </h4>
                    </div>
                    <div id="collapse3" class="panel-collapse collapse ">
                        <div class="panel-heading1"> 
                            <p id="panel-top">Supports</p>
                            <hr style="margin-top: 0; margin-bottom: 0;">
                            <a href="resources.html"><span id="panelurl">Resources</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Best practices for using surveys &
                                    survey data</p>
                            </div>
                            <br>
                            <a href=""><span id="panelurl">Curiosity at Work</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Our blog about surveys, tips for
                                    business, & more</p>
                            </div>
                            <br>
                            <a href=""><span id="panelurl">Help Center</span></a>
                            <div class="panel-body" id="panel-body">
                                <p>Tutorials & how-to guides for using
                                    SurveyMonkey</p>
                            </div>
                            
                        </div>
                        
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a href="plans&pricing.html" id="nav-content">Plans & Pricing</a>
                        </h4>
                    </div>
                </div>
            </div>      
        </div>

        <div id="but">
            <a href="login.html"><button id="login">Log in</button></a>
            <a href="signup.html"><button id="signup">Sign up Free</button></a>
        </div>
    </div>

    <!-- container -->

    <div id="container">
        <div id="left-container">
            <p id="show-all-templates"></p>
            <div>
                <input type="text" placeholder="Search"><span class="material-symbols-outlined">search</span>
            </div>
            <p>Filter by survey type</p>
            <div id="left-container-labels">
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="customers">
                    <label>Customers</label>
                </div>
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="education">
                    <label>Education</label> 
                </div>
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="employees">
                    <label>Employees</label> 
                </div>
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="events">
                    <label>Events</label> 
                </div>
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="healthcare">
                    <label>Healthcare</label> 
                </div>
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="market research">
                    <label>Market Research</label> 
                </div>
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="nonprofit">
                    <label>Nonprofit</label> 
                </div>
                <div>
                    <input class="checkbox" name="checkbox" data-id="" type="radio" value="other">
                    <label>Other</label> 
                </div>
            </div>
        </div>
        <div id="right-container"></div>
    </div>

</body>
</html>

<script src="api_append.js"></script>
<script>
    
let data=[]
let show_all_templates=0;

// getting the data on load

window.addEventListener('load',async ()=>{
    let fetchedProducts=await fetch('https://636a23c5b10125b78fd19a2e.mockapi.io/products', {
        method: 'GET',
        headers: {
            'content-Type': 'application/json'
        }
    })
    if(fetchedProducts.ok){
        let res=await fetchedProducts.json()
        data=[...res]
        // console.log(res)
        // console.log(res.length)
        renderData(data)

        show_all_templates=res.length
        document.querySelector('#show-all-templates').innerHTML=`Showing <span id="show">${show_all_templates}</span> templates`

        
    }
})

// rendering the data to the DOM

function renderData(data){
    let renderto= document.querySelector('#right-container');

    let newData=data.map((elem)=>{
        return `
        <div style="background-image: url(${elem.image});" class="child-box">
        <p>${elem.title}</p>
        </div>
        `
    })

    renderto.innerHTML=newData.join('');
}

// click function on left container- checkbox

let a=document.querySelectorAll('.checkbox')

for(let select of a){
    select.addEventListener('click', function(event){
        document.querySelector('#left-container>div:nth-child(2)>input').value=null;
        
        // console.log(event)
        let clicked=event.target.defaultValue
        let renderto= document.querySelector('#right-container');
        renderto.innerHTML=null

        let filteredData=data.filter((elem)=>{
            return elem.category==clicked
        })
        renderData(filteredData)
        // renderto.innerHTML=filteredData.join('');

        show_all_templates=filteredData.length
        document.querySelector('#show-all-templates').innerHTML=`Showing <span id="show">${show_all_templates}</span> templates`
    })
}

document.querySelector('#left-container>div:nth-child(2)>input').addEventListener('input',search);


// search functionality

function search(){
    unclick()
    let input=document.querySelector('#left-container>div:nth-child(2)>input').value;
    let newData=data.filter((element)=>{
        let entrered=element.title.toLowerCase().includes(input.toLowerCase());
        if(input){
            return entrered;
        }
        else{
            console.log('Nothing to search')
        }
    })
    if(newData.length==0){
        renderData(data)
        show_all_templates=data.length
        document.querySelector('#show-all-templates').innerHTML=`Showing <span id="show">${show_all_templates}</span> templates`
    }
    else{
        renderData(newData)
        show_all_templates=newData.length
        document.querySelector('#show-all-templates').innerHTML=`Showing <span id="show">${show_all_templates}</span> templates`
    }

}


// unclick function on checkbox

function unclick(){
    let a=document.querySelectorAll('#left-container-labels');
    let n=a[0].children.length

    for(let i=0;i<n;i++){
        a[0].children[i].children[0].checked=false
    }
}
</script>
